<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>FitTrack — User Dashboard</title>

<!-- Bootstrap 5 -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

<!-- Font Awesome -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" rel="stylesheet">

<!-- AOS -->
<link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet" />

<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<!-- Custom CSS -->
<link rel="stylesheet" href="../static/css/user.css">
</head>

<body class="bg-light">

<!-- ================= NAVBAR ================= -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark shadow-sm">
  <div class="container">
    <a class="navbar-brand d-flex align-items-center" href="index.html">
      <img src="FitTrack.jpg" width="40" height="40"
           class="me-2 rounded-circle shadow-sm" alt="FitTrack Logo">
      <span class="fw-bold fs-5">FitTrack</span>
    </a>

    <div class="ms-auto d-flex align-items-center gap-2">
      <a class="btn btn-sm btn-outline-light" href="index.html">
        <i class="fa-solid fa-house me-1"></i> Home
      </a>
      <button class="btn btn-sm btn-danger logoutBtn">
        <i class="fa-solid fa-right-from-bracket me-1"></i> Logout
      </button>
    </div>
  </div>
</nav>

<main class="container mb-5">

  <!-- ================= PROFILE ================= -->
  <div class="card p-3 mb-4 d-flex flex-column flex-md-row align-items-center gap-3 shadow-sm"
       data-aos="fade-up">

    <div class="text-center">
      <img id="userAvatar"
           class="profile-avatar rounded-circle shadow-sm mb-2"
           src="../static/images/default-avatar.png"
           width="100" height="100"
           alt="User Avatar">
      <input type="file"
             id="avatarInput"
             accept="image/*"
             class="form-control form-control-sm">
    </div>

    <div class="flex-grow-1 text-center text-md-start">
      <h5 id="userName" class="fw-bold mb-1">Guest User</h5>
      <p class="small-muted mb-0">
        Track workouts, view progress, and manage your fitness history.
      </p>
    </div>
  </div>

  <div class="row g-4 mb-3">

    <!-- ================= STATS ================= -->
    <div class="col-xl-3 col-lg-4" data-aos="fade-up">

      <div class="card p-3 stat-card shadow-sm">
        <h6 class="mb-3 fw-semibold">Your Stats</h6>

        <!-- Avg Calories -->
        <div class="small-muted">Average Calories / Day</div>
        <div class="h5 fw-bold" id="avgCalUser">—</div>

        <!-- Avg Duration -->
        <div class="small-muted mt-3">Average Duration / Workout</div>
        <div class="h5 fw-bold" id="avgDurUser">—</div>

        <!-- Most Burned Calories -->
        

        <div class="small-muted mt-3">Most Burned Calories:</div>
        <div class="h5 fw-bold" id="mostCalUser">—</div>


        <!-- Most Frequent Activity -->
        <div class="small-muted mt-3">Most Frequent Activity</div>
        <div class="h5 fw-bold" id="freqActUser">—</div>

        <!-- Longest Workout -->
        <div class="small-muted mt-3">Longest Workout</div>
        <div class="h5 fw-bold" id="longestUser">—</div>

        <hr>

        <div class="small-muted">Calories Goal (weekly)</div>
        <div class="progress mb-2">
          <div id="calBarUser" class="progress-bar bg-success" style="width:0%">0%</div>
        </div>

        <div class="small-muted">Workout Goal (weekly)</div>
        <div class="progress mb-2">
          <div id="workBarUser" class="progress-bar bg-info" style="width:0%">0%</div>
        </div>

        <div class="d-grid gap-2 mt-3">
          <button id="exportCSVUser" class="btn btn-outline-primary btn-sm">
            <i class="fa-solid fa-file-csv me-1"></i> Export CSV
          </button>
          <button id="exportJSONUser" class="btn btn-outline-secondary btn-sm">
            <i class="fa-solid fa-file-arrow-down me-1"></i> Export JSON
          </button>
          <label class="btn btn-outline-success btn-sm mb-0">
            Import JSON
            <input id="importFileUser" type="file" accept="application/json" hidden>
          </label>
        </div>
      </div>

      <!-- ================= ARCHIVED ================= -->
      <div class="card p-3 mt-3 shadow-sm"
           data-aos="fade-up" data-aos-delay="80">

        <h6 class="mb-2 fw-semibold">Archived Workouts</h6>

        <ul id="archiveListUser"
            class="list-group list-group-flush small"
            style="max-height:180px;overflow:auto"></ul>

        <div class="d-flex gap-2 mt-2">
          <button id="clearArchiveUser" class="btn btn-sm btn-danger">
            Clear Archive
          </button>
          <button id="restoreAllUser" class="btn btn-sm btn-outline-secondary">
            Restore All
          </button>
        </div>
      </div>
    </div>

    <!-- ================= CHARTS ================= -->
    <div class="col-xl-9 col-lg-8"
         data-aos="fade-up" data-aos-delay="120">

      <div class="card p-3 shadow-sm">
        <div class="d-flex justify-content-between align-items-center">
          <h6 class="mb-0 fw-semibold">Weekly Progress</h6>
          <span class="small-muted">Last 7 days</span>
        </div>

        <div class="row g-3 mt-3">
          <div class="col-lg-6">
            <canvas id="caloriesChartUser" height="180"></canvas>
          </div>
          <div class="col-lg-6">
            <canvas id="durationChartUser" height="180"></canvas>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ================= ADD WORKOUT ================= -->
  <div class="card p-3 shadow-sm"
       data-aos="fade-up" data-aos-delay="160">

    <form id="addFormUser" class="row g-2 align-items-end">
      <div class="col-md-3">
        <label class="form-label small">Activity</label>
        <input id="activityUser" class="form-control" required>
      </div>
      <div class="col-md-2">
        <label class="form-label small">Duration (min)</label>
        <input id="durationUser" type="number" min="0" class="form-control" required>
      </div>
      <div class="col-md-2">
        <label class="form-label small">Calories</label>
        <input id="caloriesUser" type="number" min="0" class="form-control" required>
      </div>
      <div class="col-md-2">
        <label class="form-label small">Date</label>
        <input id="dateUser" type="date" class="form-control" required>
      </div>
      <div class="col-md-3 d-grid">
        <button class="btn btn-primary" type="submit">
          <i class="fa-solid fa-plus me-1"></i> Add Workout
        </button>
      </div>
    </form>

    <div class="table-responsive mt-3">
      <table class="table table-sm align-middle">
        <thead class="table-light small">
          <tr>
            <th>Date</th>
            <th>Activity</th>
            <th>Duration</th>
            <th>Calories</th>
            <th class="text-end">Actions</th>
          </tr>
        </thead>
        <tbody id="tableBodyUser" class="small"></tbody>
      </table>
    </div>
  </div>
</main>

<footer class="py-4 text-center small text-muted">
  © 2025 FitTrack — User Dashboard
</footer>

<script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="../static/js/user.js"></script>

</body>
</html>
