{% extends 'base.html' %}
{% set nav_variant = 'app' %}
{% set app_area = 'auth' %}

{% block title %}Logging Out | FitTrack{% endblock %}
{% block body_class %}bg-light{% endblock %}
{% block main_class %}container w-100 d-flex justify-content-center py-4 mt-5{% endblock %}

{% block content %}
  <section class="text-center logout-panel" aria-labelledby="logout-title">
    <header>
      <h1 id="logout-title" class="h3">Logging out...</h1>
    </header>
    <p aria-live="polite">You will be redirected to the login page in <span id="countdown">4</span> seconds.</p>
    <p class="small text-muted mb-0">If not redirected, <a href="{{ url_for('login') }}">go to login</a>.</p>
  </section>
{% endblock %}

{% block page_scripts %}
  <script nonce="{{ csp_nonce() }}">
    let seconds = 4;
    const countdown = document.getElementById('countdown');
    const timer = setInterval(() => {
      seconds -= 1;
      if (countdown) countdown.textContent = String(seconds);
      if (seconds <= 0) {
        clearInterval(timer);
        window.location.href = "{{ url_for('login') }}";
      }
    }, 1000);
  </script>
{% endblock %}
